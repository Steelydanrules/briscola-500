!function(e){var r={};function t(s){if(r[s])return r[s].exports;var i=r[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(s,i,function(r){return e[r]}.bind(null,i));return s},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/dist/",t(t.s=0)}([function(e,r,t){"use strict";function s(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}t.r(r);var i=function(){function e(r,t,s,i){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=s.getContext("2d"),this.game=i,this.team=r,this.currentHand=[],this.id=t,this.addCard=this.addCard.bind(this),this.promptMove=this.promptMove.bind(this),this.renderThrow=this.renderThrow.bind(this),this.chooseBestCard=this.chooseBestCard.bind(this),this.briscAvailable=this.briscAvailable.bind(this),this.worstCardThrower=this.worstCardThrower.bind(this),this.modifyBriscPoints=this.modifyBriscPoints.bind(this),this.toCallBrisc=this.toCallBrisc.bind(this),this.positions={1:{rot:-90,one:-160,two:-230,three:-300,four:-370,five:-440,card1to5yPos:902,thrownCardyPos:700,throwCardxPos:-314},2:{rot:180,one:-410,two:-480,three:-550,four:-620,five:-690,card1to5yPos:-98,thrownCardyPos:-250,throwCardxPos:-564},3:{rot:90,one:105,two:175,three:245,four:315,five:385,card1to5yPos:-98,thrownCardyPos:-300,throwCardxPos:231}},this.possibleBriscs={DENARI:0,SPADE:0,COPPE:0,BASTONI:0}}var r,t,i;return r=e,(t=[{key:"briscAvailable",value:function(){this.currentHand.length<3&&(this.possibleBriscs={DENARI:0,SPADE:0,COPPE:0,BASTONI:0})}},{key:"renderThrow",value:function(e){var r=this,t=this.positions[this.id],s=new Image,i=new Image,a=new Image,n=new Image,c=new Image,o=new Image;o.src=this.currentHand[e].imageUrl,0!==this.currentHand.length&&0!==e?s.src="src/public/images/card-back-rename.JPG":s.src="src/public/images/no-card.png",this.currentHand.length>1&&1!==e?i.src="src/public/images/card-back-rename.JPG":i.src="src/public/images/no-card.png",this.currentHand.length>2&&2!==e?a.src="src/public/images/card-back-rename.JPG":a.src="src/public/images/no-card.png",this.currentHand.length>3&&3!==e?n.src="src/public/images/card-back-rename.JPG":n.src="src/public/images/no-card.png",this.currentHand.length>4&&4!==e?c.src="src/public/images/card-back-rename.JPG":c.src="src/public/images/no-card.png",setTimeout((function(){r.ctx.save(),r.ctx.rotate(t.rot*(Math.PI/180)),r.ctx.drawImage(s,t.one,t.card1to5yPos,55,98),r.ctx.drawImage(i,t.two,t.card1to5yPos,55,98),r.ctx.drawImage(a,t.three,t.card1to5yPos,55,98),r.ctx.drawImage(n,t.four,t.card1to5yPos,55,98),r.ctx.drawImage(c,t.five,t.card1to5yPos,55,98),r.ctx.drawImage(o,t.throwCardxPos,t.thrownCardyPos,81,144),r.ctx.restore()}),500)}},{key:"addCard",value:function(e){this.currentHand.length<5?(3!==e.points&&4!==e.points||(this.possibleBriscs[e.suit]+=e.points),e.owner=this,e.faceUp=!0,e.team=this.team,this.currentHand.push(e)):console.log("cpu trying to draw again.  IDK WHY!")}},{key:"worstCardThrower",value:function(){for(var e=0,r=1;r<5;r++)this.currentHand[r].rank<this.currentHand[e].rank&&(e=r);return e}},{key:"modifyBriscPoints",value:function(e){(3===e.points||4===e.points&&0!==this.possibleBriscs[e.suit])&&(this.possibleBriscs[e.suit]-=e.points)}},{key:"toCallBrisc",value:function(e){this.game.callBrisc(e,this)}},{key:"chooseBestCard",value:function(){var e,r;if(0!==this.game.currentDeck.cardsInDeck.length)e=this.worstCardThrower(),r=this.currentHand[e];else{e=Math.floor(Math.random()*this.currentHand.length),r=this.currentHand[e];for(var t=["DENARI","SPADE","COPPE","BASTONI"],s=0;s<4;s++){var i=t[s];7===this.possibleBriscs[i]&&this.toCallBrisc(i)}}this.modifyBriscPoints(r),this.renderThrow(e),this.currentHand=this.currentHand.slice(0,e).concat(this.currentHand.slice(e+1,this.currentHand.length)),this.game.thrownCards.push(r)}},{key:"promptMove",value:function(){var e=this;this.briscAvailable(),this.chooseBestCard(),4===this.game.thrownCards.length?setTimeout((function(){return e.game.winningCardThrown(e.game)}),2500):this.game.nextThrow()}}])&&s(r.prototype,t),i&&s(r,i),e}();function a(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var n=function(){function e(r,t,s){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=s,this.ctx=t.getContext("2d"),this.game=s,this.team=r,this.currentHand=[],this.id=0,this.possibleBriscs={DENARI:0,SPADE:0,COPPE:0,BASTONI:0},this.briscAvailable=this.briscAvailable.bind(this),this.addCard=this.addCard.bind(this),this.throwCard=this.throwCard.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.promptMove=this.promptMove.bind(this),this.renderThrow=this.renderThrow.bind(this),this.registerEventListeners(),this.renderBriscCards=this.renderBriscCards.bind(this),this.modifyBriscPoints=this.modifyBriscPoints.bind(this)}var r,t,s;return r=e,(t=[{key:"briscAvailable",value:function(){this.currentHand.length<3&&(this.possibleBriscs={DENARI:0,SPADE:0,COPPE:0,BASTONI:0})}},{key:"modifyBriscPoints",value:function(e){(3===e.points||4===e.points&&0!==this.possibleBriscs[e.suit])&&(this.possibleBriscs[e.suit]-=e.points)}},{key:"renderBriscCards",value:function(){var e=this,r=new Image;r.src="src/public/images/no-card.png";var t=new Image;4===this.possibleBriscs.DENARI||7===this.possibleBriscs.DENARI?t.src="src/public/images/KGold.png":t.src="src/public/images/card-back-rename.JPG";var s=new Image;3===this.possibleBriscs.DENARI||7===this.possibleBriscs.DENARI?s.src="src/public/images/QGold.png":s.src="src/public/images/card-back-rename.JPG";var i=new Image;4===this.possibleBriscs.SPADE||7===this.possibleBriscs.SPADE?i.src="src/public/images/KSwords.png":i.src="src/public/images/card-back-rename.JPG";var a=new Image;3===this.possibleBriscs.SPADE||7===this.possibleBriscs.SPADE?a.src="src/public/images/QSwords.png":a.src="src/public/images/card-back-rename.JPG";var n=new Image;4===this.possibleBriscs.COPPE||7===this.possibleBriscs.COPPE?n.src="src/public/images/KCups.png":n.src="src/public/images/card-back-rename.JPG";var c=new Image;3===this.possibleBriscs.COPPE||7===this.possibleBriscs.COPPE?c.src="src/public/images/QCups.png":c.src="src/public/images/card-back-rename.JPG";var o=new Image;4===this.possibleBriscs.BASTONI||7===this.possibleBriscs.BASTONI?o.src="src/public/images/KBats.png":o.src="src/public/images/card-back-rename.JPG";var l=new Image;3===this.possibleBriscs.BASTONI||7===this.possibleBriscs.BASTONI?l.src="src/public/images/QBats.png":l.src="src/public/images/card-back-rename.JPG",setTimeout((function(){e.ctx.drawImage(r,743,500,350,185),e.ctx.drawImage(t,750,530,35,65),e.ctx.drawImage(s,770,580,35,65),e.ctx.drawImage(i,810,530,35,65),e.ctx.drawImage(a,830,580,35,65),e.ctx.drawImage(n,870,530,35,65),e.ctx.drawImage(c,890,580,35,65),e.ctx.drawImage(o,930,530,35,65),e.ctx.drawImage(l,950,580,35,65),e.ctx.font="24px Georgia",e.ctx.fillStyle="red",e.ctx.fillText("Call a brisc on your turn",743,522)}),250)}},{key:"addCard",value:function(e){this.currentHand.length<5?(3!==e.points&&4!==e.points||(this.possibleBriscs[e.suit]+=e.points),e.owner=this,e.faceUp=!0,e.team=this.team,this.currentHand.push(e)):console.log("human trying to draw again.  IDK WHY")}},{key:"renderThrow",value:function(e){var r=this,t=new Image,s=new Image,i=new Image,a=new Image,n=new Image,c=new Image;c.src=this.currentHand[e].imageUrl,0!==this.currentHand.length&&0!==e?t.src=this.currentHand[0].imageUrl:t.src="src/public/images/no-card.png",this.currentHand.length>1&&1!==e?s.src=this.currentHand[1].imageUrl:s.src="src/public/images/no-card.png",this.currentHand.length>2&&2!==e?i.src=this.currentHand[2].imageUrl:i.src="src/public/images/no-card.png",this.currentHand.length>3&&3!==e?a.src=this.currentHand[3].imageUrl:a.src="src/public/images/no-card.png",this.currentHand.length>4&&4!==e?n.src=this.currentHand[4].imageUrl:n.src="src/public/images/no-card.png",setTimeout((function(){r.ctx.drawImage(t,300,505,81,144),r.ctx.drawImage(s,390,505,81,144),r.ctx.drawImage(i,480,505,81,144),r.ctx.drawImage(a,570,505,81,144),r.ctx.drawImage(n,660,505,81,144),r.ctx.drawImage(c,480,345,81,144)}),500)}},{key:"throwCard",value:function(e){var r=this,t=this.currentHand[e];return this.currentHand=this.currentHand.slice(0,e).concat(this.currentHand.slice(e+1,this.currentHand.length)),this.game.thrownCards.push(t),this.modifyBriscPoints(t),4===this.game.thrownCards.length&&setTimeout((function(){return r.game.winningCardThrown(r.game)}),2500),t}},{key:"handleMouseDown",value:function(e){var r=this;console.log(e.pageY,"Y"),console.log(e.pageX,"X");var t=document.getElementsByClassName("game-board-container")[0].offsetWidth;return t=t<=1200?0:(t-1200)/2-105,e.preventDefault(),e.pageX>t+963&&e.pageX<t+1018&&e.pageY>611&&e.pageY<726&&7===this.possibleBriscs.DENARI&&(this.possibleBriscs.DENARI=0,this.game.callBrisc("DENARI",this),this.renderBriscCards()),e.pageX>t+1023&&e.pageX<t+1078&&e.pageY>611&&e.pageY<726&&7===this.possibleBriscs.SPADE&&(this.possibleBriscs.SPADE=0,this.game.callBrisc("SPADE",this),this.renderBriscCards()),e.pageX>t+1083&&e.pageX<t+1138&&e.pageY>611&&e.pageY<726&&7===this.possibleBriscs.COPPE&&(this.possibleBriscs.COPPE=0,this.game.callBrisc("COPPE",this),this.renderBriscCards()),e.pageX>t+1143&&e.pageX<t+1198&&e.pageY>611&&e.pageY<726&&7===this.possibleBriscs.BASTONI&&(this.possibleBriscs.BASTONI=0,this.game.callBrisc("BASTONI",this),this.renderBriscCards()),e.pageX>t+513&&e.pageX<t+594&&e.pageY>585&&e.pageY<729&&this.currentHand.length>0?(this.renderThrow(0),this.removeEventListeners(),setTimeout((function(){return r.game.nextThrow()}),0),this.throwCard(0)):e.pageX>t+603&&e.pageX<t+684&&e.pageY>585&&e.pageY<729&&this.currentHand.length>1?(this.renderThrow(1),this.removeEventListeners(),setTimeout((function(){return r.game.nextThrow()}),0),this.throwCard(1)):e.pageX>t+693&&e.pageX<t+774&&e.pageY>585&&e.pageY<729&&this.currentHand.length>2?(this.renderThrow(2),this.removeEventListeners(),setTimeout((function(){return r.game.nextThrow()}),0),this.throwCard(2)):e.pageX>t+783&&e.pageX<t+864&&e.pageY>585&&e.pageY<729&&this.currentHand.length>3?(this.renderThrow(3),this.removeEventListeners(),setTimeout((function(){return r.game.nextThrow()}),0),this.throwCard(3)):e.pageX>t+873&&e.pageX<t+954&&e.pageY>585&&e.pageY<729&&this.currentHand.length>4?(this.renderThrow(4),this.removeEventListeners(),setTimeout((function(){return r.game.nextThrow()}),0),this.throwCard(4)):void 0}},{key:"registerEventListeners",value:function(){document.addEventListener("mousedown",this.handleMouseDown)}},{key:"removeEventListeners",value:function(){document.removeEventListener("mousedown",this.handleMouseDown)}},{key:"promptMove",value:function(){this.briscAvailable(),this.registerEventListeners()}}])&&a(r.prototype,t),s&&a(r,s),e}();function c(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.cardsInDeck=[{suit:"DENARI",points:0,rank:1,faceUp:!1,owner:null,imageUrl:"src/public/images/2Gold.png"},{suit:"DENARI",points:0,rank:2,faceUp:!1,owner:null,imageUrl:"src/public/images/4Gold.png"},{suit:"DENARI",points:0,rank:3,faceUp:!1,owner:null,imageUrl:"src/public/images/5Gold.png"},{suit:"DENARI",points:0,rank:4,faceUp:!1,owner:null,imageUrl:"src/public/images/6Gold.png"},{suit:"DENARI",points:0,rank:5,faceUp:!1,owner:null,imageUrl:"src/public/images/7Gold.png"},{suit:"DENARI",points:2,rank:6,faceUp:!1,owner:null,imageUrl:"src/public/images/JGold.png"},{suit:"DENARI",points:3,rank:7,faceUp:!1,owner:null,imageUrl:"src/public/images/QGold.png"},{suit:"DENARI",points:4,rank:8,faceUp:!1,owner:null,imageUrl:"src/public/images/KGold.png"},{suit:"DENARI",points:10,rank:9,faceUp:!1,owner:null,imageUrl:"src/public/images/3Gold.png"},{suit:"DENARI",points:11,rank:10,faceUp:!1,owner:null,imageUrl:"src/public/images/AGold.png"},{suit:"SPADE",points:0,rank:1,faceUp:!1,owner:null,imageUrl:"src/public/images/2Swords.png"},{suit:"SPADE",points:0,rank:2,faceUp:!1,owner:null,imageUrl:"src/public/images/4Swords.png"},{suit:"SPADE",points:0,rank:3,faceUp:!1,owner:null,imageUrl:"src/public/images/5Swords.png"},{suit:"SPADE",points:0,rank:4,faceUp:!1,owner:null,imageUrl:"src/public/images/6Swords.png"},{suit:"SPADE",points:0,rank:5,faceUp:!1,owner:null,imageUrl:"src/public/images/7Swords.png"},{suit:"SPADE",points:2,rank:6,faceUp:!1,owner:null,imageUrl:"src/public/images/JSwords.png"},{suit:"SPADE",points:3,rank:7,faceUp:!1,owner:null,imageUrl:"src/public/images/QSwords.png"},{suit:"SPADE",points:4,rank:8,faceUp:!1,owner:null,imageUrl:"src/public/images/KSwords.png"},{suit:"SPADE",points:10,rank:9,faceUp:!1,owner:null,imageUrl:"src/public/images/3Swords.png"},{suit:"SPADE",points:11,rank:10,faceUp:!1,owner:null,imageUrl:"src/public/images/ASwords.png"},{suit:"COPPE",points:0,rank:1,faceUp:!1,owner:null,imageUrl:"src/public/images/2Cups.png"},{suit:"COPPE",points:0,rank:2,faceUp:!1,owner:null,imageUrl:"src/public/images/4Cups.png"},{suit:"COPPE",points:0,rank:3,faceUp:!1,owner:null,imageUrl:"src/public/images/5Cups.png"},{suit:"COPPE",points:0,rank:4,faceUp:!1,owner:null,imageUrl:"src/public/images/6Cups.png"},{suit:"COPPE",points:0,rank:5,faceUp:!1,owner:null,imageUrl:"src/public/images/7Cups.png"},{suit:"COPPE",points:2,rank:6,faceUp:!1,owner:null,imageUrl:"src/public/images/JCups.png"},{suit:"COPPE",points:3,rank:7,faceUp:!1,owner:null,imageUrl:"src/public/images/QCups.png"},{suit:"COPPE",points:4,rank:8,faceUp:!1,owner:null,imageUrl:"src/public/images/KCups.png"},{suit:"COPPE",points:10,rank:9,faceUp:!1,owner:null,imageUrl:"src/public/images/3Cups.png"},{suit:"COPPE",points:11,rank:10,faceUp:!1,owner:null,imageUrl:"src/public/images/ACups.png"},{suit:"BASTONI",points:0,rank:1,faceUp:!1,owner:null,imageUrl:"src/public/images/2Bats.png"},{suit:"BASTONI",points:0,rank:2,faceUp:!1,owner:null,imageUrl:"src/public/images/4Bats.png"},{suit:"BASTONI",points:0,rank:3,faceUp:!1,owner:null,imageUrl:"src/public/images/5Bats.png"},{suit:"BASTONI",points:0,rank:4,faceUp:!1,owner:null,imageUrl:"src/public/images/6Bats.png"},{suit:"BASTONI",points:0,rank:5,faceUp:!1,owner:null,imageUrl:"src/public/images/7Bats.png"},{suit:"BASTONI",points:2,rank:6,faceUp:!1,owner:null,imageUrl:"src/public/images/JBats.png"},{suit:"BASTONI",points:3,rank:7,faceUp:!1,owner:null,imageUrl:"src/public/images/QBats.png"},{suit:"BASTONI",points:4,rank:8,faceUp:!1,owner:null,imageUrl:"src/public/images/KBats.png"},{suit:"BASTONI",points:10,rank:9,faceUp:!1,owner:null,imageUrl:"src/public/images/3Bats.png"},{suit:"BASTONI",points:11,rank:10,faceUp:!1,owner:null,imageUrl:"src/public/images/ABats.png"}],this.showCard=this.showCard.bind(this),this.shuffleDeck=this.shuffleDeck.bind(this)}var r,t,s;return r=e,(t=[{key:"showCard",value:function(e){e.faceUp=!0}},{key:"shuffleDeck",value:function(){this.cardsInDeck.forEach((function(e){e.faceUp=!1,e.owner=null}));for(var e=0;e<1992;e++){var r=Math.floor(Math.random()*this.cardsInDeck.length),t=Math.floor(Math.random()*this.cardsInDeck.length),s=this.cardsInDeck[r];this.cardsInDeck[r]=this.cardsInDeck[t],this.cardsInDeck[t]=s}}}])&&c(r.prototype,t),s&&c(r,s),e}();function l(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var u=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentRoundScore=0,this.totalGameScore=0,this.name=r,this.addTotalScore=this.addTotalScore.bind(this)}var r,t,s;return r=e,(t=[{key:"addTotalScore",value:function(){this.totalGameScore+=this.currentRoundScore,this.currentRoundScore=0}}])&&l(r.prototype,t),s&&l(r,s),e}();function h(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var d=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentBrisc=[],this.currentDeck=new o,this.startOfEntireRound=0,this.startOfThisHand=0,this.thrownCards=[],this.lastHand={},this.ctx=r.getContext("2d"),this.humanTeam=new u("humanTeam"),this.robotTeam=new u("robotTeam"),this.PLAYERS=[new n(this.humanTeam,r,this),new i(this.robotTeam,1,r,this),new i(this.humanTeam,2,r,this),new i(this.robotTeam,3,r,this)],this.drawInitialBoard=this.drawInitialBoard.bind(this),this._dealCards=this._dealCards.bind(this),this.callBrisc=this.callBrisc.bind(this),this.addCardsValue=this.addCardsValue.bind(this),this.finalTally=this.finalTally.bind(this),this.winningCardThrown=this.winningCardThrown.bind(this),this.hasAnybodyWon=this.hasAnybodyWon.bind(this),this.eachPlayerDraws=this.eachPlayerDraws.bind(this),this.nextThrow=this.nextThrow.bind(this),this.populateLastHand=this.populateLastHand.bind(this),this.restartGame=this.restartGame.bind(this)}var r,t,s;return r=e,(t=[{key:"drawInitialBoard",value:function(){var e=this,r=new Image,t=new Image;r.src="src/public/images/card-back-rename.JPG",t.src="src/public/images/no-card.png";var s=this.PLAYERS[0].currentHand,i=new Image,a=new Image,n=new Image,c=new Image,o=new Image,l=new Image,u=new Image,h=new Image,d=new Image,g=new Image,p=new Image,m=new Image,f=new Image,w=new Image;void 0===this.lastHand[0]?(p.src="src/public/images/no-card.png",m.src="src/public/images/no-card.png",f.src="src/public/images/no-card.png",w.src="src/public/images/no-card.png"):(p.src=this.lastHand[0].imageUrl,m.src=this.lastHand[1].imageUrl,f.src=this.lastHand[2].imageUrl,w.src=this.lastHand[3].imageUrl),s.length>0?(i.src=s[0].imageUrl,l.src="src/public/images/card-back-rename.JPG"):(i.src="src/public/images/no-card.png",l.src="src/public/images/no-card.png"),s.length>1?(a.src=s[1].imageUrl,u.src="src/public/images/card-back-rename.JPG"):(a.src="src/public/images/no-card.png",u.src="src/public/images/no-card.png"),s.length>2?(n.src=s[2].imageUrl,h.src="src/public/images/card-back-rename.JPG"):(n.src="src/public/images/no-card.png",h.src="src/public/images/no-card.png"),s.length>3?(c.src=s[3].imageUrl,d.src="src/public/images/card-back-rename.JPG"):(c.src="src/public/images/no-card.png",d.src="src/public/images/no-card.png"),s.length>4?(o.src=s[4].imageUrl,g.src="src/public/images/card-back-rename.JPG"):(o.src="src/public/images/no-card.png",g.src="src/public/images/no-card.png"),setTimeout((function(){e.ctx.save(),e.ctx.rotate(Math.PI/180*-90),e.ctx.drawImage(l,-160,902,55,98),e.ctx.drawImage(u,-230,902,55,98),e.ctx.drawImage(h,-300,902,55,98),e.ctx.drawImage(d,-370,902,55,98),e.ctx.drawImage(g,-440,902,55,98),e.ctx.drawImage(t,-314,700,81,144),0!==e.currentDeck.cardsInDeck.length?e.ctx.drawImage(r,-320,474,55,98):e.ctx.drawImage(t,-320,474,55,98),e.ctx.restore(),e.ctx.save(),e.ctx.rotate(Math.PI/180*90),e.ctx.drawImage(l,105,-98,55,98),e.ctx.drawImage(u,175,-98,55,98),e.ctx.drawImage(h,245,-98,55,98),e.ctx.drawImage(d,315,-98,55,98),e.ctx.drawImage(g,385,-98,55,98),e.ctx.drawImage(t,231,-300,81,144),e.ctx.restore(),e.ctx.save(),e.ctx.rotate(Math.PI/180*180),e.ctx.drawImage(l,-410,-98,55,98),e.ctx.drawImage(u,-480,-98,55,98),e.ctx.drawImage(h,-550,-98,55,98),e.ctx.drawImage(d,-620,-98,55,98),e.ctx.drawImage(g,-690,-98,55,98),e.ctx.drawImage(t,-564,-250,81,144),e.ctx.restore(),e.currentDeck.cardsInDeck.length>0&&(e.ctx.font="36px Georgia",e.ctx.fillStyle="red",e.ctx.fillText(e.currentDeck.cardsInDeck.length,506,300)),e.ctx.drawImage(t,0,0,350,90),e.ctx.drawImage(t,705,0,350,90),e.ctx.font="24px Georgia",e.ctx.fillStyle="red",e.ctx.fillText("Total Game Score (first to 500)",15,20),e.ctx.fillText("Current Round Score",740,20),e.ctx.font="16px Georgia",e.ctx.fillStyle="red",e.ctx.fillText("Your Team                            Other Team",50,35),e.ctx.fillText("Your Team                            Other Team",715,35),e.ctx.font="24px Georgia",e.ctx.fillStyle="whitesmoke",e.ctx.fillText(e.humanTeam.totalGameScore,75,60),e.ctx.fillText(e.robotTeam.totalGameScore,265,60),e.ctx.fillText(e.humanTeam.currentRoundScore,745,60),e.ctx.fillText(e.robotTeam.currentRoundScore,940,60),e.ctx.drawImage(i,300,505,81,144),e.ctx.drawImage(a,390,505,81,144),e.ctx.drawImage(n,480,505,81,144),e.ctx.drawImage(c,570,505,81,144),e.ctx.drawImage(o,660,505,81,144),e.ctx.drawImage(p,155,480,40,72),e.ctx.drawImage(m,205,530,40,72),e.ctx.drawImage(f,155,580,40,72),e.ctx.drawImage(w,105,530,40,72),e.ctx.drawImage(t,480,345,81,144)}),350)}},{key:"_dealCards",value:function(){var e=this;if(0===this.PLAYERS[0].currentHand.length){var r=new Image;r.src="src/public/images/no-card.png",setTimeout((function(){e.ctx.drawImage(r,195,400,100,125)}),200);for(var t=0;t<5;t++)this.PLAYERS.forEach((function(r){var t=e.currentDeck.cardsInDeck.pop();r.addCard(t)}))}}},{key:"callBrisc",value:function(e,r){var t=this;if(0===this.currentBrisc.length){this.currentBrisc.push(e),r.team.currentRoundScore+=40,1===r.id?alert("THE OPPONENT ON THE RIGHT CALLED A BRISC AND THE CURRENT BRISC IS ".concat(e," (+40 points for them!)")):3===r.id?alert("THE OPPONENT ON THE LEFT CALLED A BRISC AND THE CURRENT BRISC IS ".concat(e," (+40 points for them!)")):2===r.id&&alert("YOUR PARTNER CALLED A BRISC AND THE CURRENT BRISC IS ".concat(e," (+40 points for you!)"));var s=new Image,i=new Image;i.src="src/public/images/no-card.png",s.src="DENARI"===e?"src/public/images/AGold.png":"SPADE"===e?"src/public/images/ASwords.png":"COPPE"===e?"src/public/images/ACups.png":"BASTONI"===e?"src/public/images/ABats.png":"src/public/images/no-card.png",setTimeout((function(){t.ctx.font="16px Georgia",t.ctx.fillStyle="red",t.ctx.fillText("Current Brisc:",195,420),t.ctx.drawImage(s,220,435,45,80),t.ctx.drawImage(i,700,0,350,90),t.ctx.font="24px Georgia",t.ctx.fillStyle="red",t.ctx.fillText("Current Round Score",740,20),t.ctx.font="16px Georgia",t.ctx.fillStyle="red",t.ctx.fillText("Your Team                            Other Team",50,35),t.ctx.fillText("Your Team                            Other Team",715,35),t.ctx.font="24px Georgia",t.ctx.fillStyle="whitesmoke",t.ctx.fillText(t.humanTeam.currentRoundScore,745,60),t.ctx.fillText(t.robotTeam.currentRoundScore,940,60)}),200)}else-1===this.currentBrisc.indexOf(e)&&(1===r.id?alert("THE OPPONENT ON THE RIGHT CALLED A BRISC OF ".concat(e," (+20 points for them!). THE CURRENT BRISC IS STILL ").concat(this.currentBrisc[0])):3===r.id?alert("THE OPPONENT ON THE LEFT CALLED A BRISC OF ".concat(e," (+20 points for them!). THE CURRENT BRISC IS STILL ").concat(this.currentBrisc[0])):2===r.id&&alert("YOUR PARTNER CALLED A BRISC OF ".concat(e," (+20 points for you!). THE CURRENT BRISC IS STILL ").concat(this.currentBrisc[0])),this.currentBrisc.push(e),r.team.currentRoundScore+=20)}},{key:"addCardsValue",value:function(e,r){var t=0;r.forEach((function(e){t+=e.points})),e.currentRoundScore+=t}},{key:"finalTally",value:function(){this.humanTeam.addTotalScore(),this.robotTeam.addTotalScore()}},{key:"winningCardThrown",value:function(){var e=this;if(void 0!==this)if(4===this.thrownCards.length){for(var r=this.thrownCards[0],t=this.thrownCards[0].suit,s=1;s<4;s++){var i=this.thrownCards[s];i.rank>r.rank&&i.suit===t&&(r=i)}if(0!==this.currentBrisc.length){t=this.currentBrisc[0];for(var a=0;a<4;a++){var n=this.thrownCards[a];(n.suit===t&&r.suit!==t||n.rank>r.rank&&n.suit===t&&r.suit===t)&&(r=n)}}"humanTeam"==new String(r.owner.team.name)?this.addCardsValue(this.humanTeam,this.thrownCards):this.addCardsValue(this.robotTeam,this.thrownCards),this.populateLastHand(),this.startOfThisHand=this.PLAYERS.indexOf(r.owner),this.thrownCards=[],0!==this.currentDeck.cardsInDeck.length&&this.eachPlayerDraws(this.startOfThisHand),0!==this.PLAYERS[0].currentHand.length?this.playTurn():setTimeout((function(){return e.restartGame()}),2500),this.drawInitialBoard()}else console.log("NOT YET!!!")}},{key:"restartGame",value:function(){this.finalTally(),this.hasAnybodyWon()?console.log("gamover"):(this.startOfEntireRound++,this.startOfThisHand=this.startOfEntireRound,this.currentBrisc=[],this.currentDeck=new o,this.thrownCards=[],this.lastHand={},this.currentDeck.shuffleDeck(),this._dealCards(),this.playTurn(),this.drawInitialBoard())}},{key:"populateLastHand",value:function(){for(var e=0;e<4;e++){var r=this.thrownCards[e];this.lastHand[r.owner.id]=r}}},{key:"nextThrow",value:function(){var e=this.PLAYERS[(this.startOfThisHand+1)%this.PLAYERS.length],r=this.PLAYERS[(this.startOfThisHand+2)%this.PLAYERS.length],t=this.PLAYERS[(this.startOfThisHand+3)%this.PLAYERS.length];1===this.thrownCards.length&&setTimeout((function(){return e.promptMove()}),1e3),2===this.thrownCards.length&&setTimeout((function(){return r.promptMove()}),1e3),3===this.thrownCards.length&&setTimeout((function(){return t.promptMove()}),1e3)}},{key:"playTurn",value:function(){this.PLAYERS[0].briscAvailable(),this.PLAYERS[0].renderBriscCards(),this.PLAYERS[(this.startOfThisHand+0)%this.PLAYERS.length].promptMove()}},{key:"eachPlayerDraws",value:function(e){var r=this.PLAYERS[(e+0)%4],t=this.PLAYERS[(e+1)%4],s=this.PLAYERS[(e+2)%4],i=this.PLAYERS[(e+3)%4];r.addCard(this.currentDeck.cardsInDeck.pop()),t.addCard(this.currentDeck.cardsInDeck.pop()),s.addCard(this.currentDeck.cardsInDeck.pop()),i.addCard(this.currentDeck.cardsInDeck.pop())}},{key:"hasAnybodyWon",value:function(){if(this.humanTeam.totalGameScore>=500||this.robotTeam.totalGameScore>=500){var e=document.querySelector(".game-over"),r=document.querySelector(".my-score"),t=document.querySelector(".their-score");return r.value=this.humanTeam.totalGameScore,t.value=this.robotTeam.totalGameScore,e.style.display="block",!0}return!1}}])&&h(r.prototype,t),s&&h(r,s),e}();document.addEventListener("DOMContentLoaded",(function(){var e,r,t=document.getElementById("canvas-game"),s=new d(t);r=0,(e=s).currentDeck.shuffleDeck(),e._dealCards(),setTimeout((function(){return e.drawInitialBoard()}),250),e.startOfEntireRound=r,e.startOfThisHand=r,s.playTurn();var i=document.getElementById("rules-button"),a=document.querySelector(".modal"),n=document.querySelector(".close-btn");i.onclick=function(){a.style.display="block"},n.onclick=function(){a.style.display="none"},window.onclick=function(e){e.target==a&&(a.style.display="none")}}))}]);
//# sourceMappingURL=main.js.map